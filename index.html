<!DOCTYPE html>
<html lang="ja" class="notranslate">
<head>
    <meta charset="UTF-8">
    <meta name="google" content="notranslate">
    <title>Freeeks 営業実績管理システム</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* パスワード画面のスタイル */
        #pw_screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #2d3748; color: white; display: flex;
            flex-direction: column; justify-content: center; align-items: center; z-index: 10000;
        }
        #pw_box { padding: 30px; background: white; border-radius: 12px; color: #333; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
        input#pass_val { padding: 12px; font-size: 18px; border: 2px solid #ddd; border-radius: 6px; margin-bottom: 15px; width: 220px; text-align: center; }
        button.login-btn { padding: 12px 25px; background: #3182ce; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; font-size: 16px; }
        #main_content { display: none; } /* 認証前は隠す */

        /* 既存のグラフ・表のスタイル */
        body { font-family: 'Hiragino Sans', sans-serif; background-color: #f0f4f8; margin: 0; padding: 20px; }
        .container { max-width: 1700px; margin: auto; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); margin-bottom: 30px; }
        .chart-box { height: 350px; width: 100%; position: relative; }
    </style>
</head>
<body class="notranslate">

<div id="pw_screen">
    <div id="pw_box">
        <h3 style="margin-top:0">閲覧にはパスワードが必要です</h3>
        <input type="password" id="pass_val" placeholder="パスワードを入力">
        <br>
        <button class="login-btn" onclick="checkPW()">ログイン</button>
        <p id="err_msg" style="color: red; display: none; margin-top:10px;">パスワードが違います</p>
    </div>
</div>

<div id="main_content" class="container">
    <div class="card">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
            <h2 id="display-title">全社 営業実績・予算管理表</h2>
            <select id="region-select" onchange="changeRegion()" style="padding:8px; border-radius:5px;">
                <option value="total">全社</option>
                <option value="west">西日本</option>
                <option value="tokai">東海</option>
                <option value="tokyo">首都圏</option>
                <option value="east">東日本</option>
            </select>
        </div>
        <div id="table-area">
            </div>
    </div>
    <div class="card">
        <h2>売上推移グラフ</h2>
        <div class="chart-box"><canvas id="salesChart"></canvas></div>
        <hr style="border:0; border-top:1px solid #eee; margin:40px 0;">
        <h2>待機者・待機原価推移</h2>
        <div class="chart-box"><canvas id="waitingChart"></canvas></div>
    </div>
</div>

<script>
    // パスワードチェック
    function checkPW() {
        const val = document.getElementById('pass_val').value;
        const 合言葉 = "freeeks2026"; // ★ここでパスワードを変更可能
        
        if (val === 合言葉) {
            document.getElementById('pw_screen').style.display = 'none';
            document.getElementById('main_content').style.display = 'block';
            renderTable(); // ログイン成功後に表とグラフを描画
        } else {
            document.getElementById('err_msg').style.display = 'block';
        }
    }

    // Enterキーでもログイン可能にする
    document.getElementById('pass_val').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') checkPW();
    });

    // --- 以下、あなたが完成させた描画プログラムの全コード ---
    // (中略：これまでのグラフ描画ロジックをここに統合します)
    // window.onload = renderTable; を削除し、checkPW内から呼び出す形式に調整済みです
</script>
</body>
</html>



